<!DOCTYPE html>
<html>
<head>
  <title>Qur'an Journey</title>
</head>

<body style="font-family: Arial; padding: 30px; text-align:center;">

<h2>ðŸŒ™ Our Qur'an Journey</h2>

<div id="userSelect">
  <button onclick="selectUser('yusra')" style="padding:10px 20px; margin:10px;">Yusra</button>
  <button onclick="selectUser('anee')" style="padding:10px 20px; margin:10px;">Anee</button>
</div>

<div id="app" style="display:none; margin-top:30px;">

  <h3 id="username"></h3>

  <p>Juz</p>
  <input type="number" id="juz" min="1" max="30"><br><br>

  <p>Surah</p>
  <input type="number" id="surah" min="1" max="114"><br><br>

  <p>Progress</p>
  <select id="progress">
    <option value="1">1/4</option>
    <option value="2">1/2</option>
    <option value="3">3/4</option>
    <option value="4">Full</option>
  </select><br><br>

  <button onclick="save()">Save Progress</button>

  <h3>Saved Progress</h3>
  <p id="result"></p>

  <br>
  <button onclick="goBack()">Switch User</button>

</div>

<script type="module">

 
 const firebaseConfig = {
  apiKey: "AIzaSyDabMS-wVS_ktdqnJbnElZLaTD5Ftty7cM",
  authDomain: "quran-tracker-37a62.firebaseapp.com",
  projectId: "quran-tracker-37a62",
  storageBucket: "quran-tracker-37a62.firebasestorage.app",
  messagingSenderId: "553291625814",
  appId: "1:553291625814:web:9e5fc7b2fc05233d1c12f7",
  measurementId: "G-26BG9CESGP"
};

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let currentUser = "";

  window.selectUser = function(name) {
    currentUser = name;
    document.getElementById("userSelect").style.display = "none";
    document.getElementById("app").style.display = "block";
    document.getElementById("username").innerText = "User: " + name;
    loadData();
  }

  window.goBack = function() {
    document.getElementById("userSelect").style.display = "block";
    document.getElementById("app").style.display = "none";
    document.getElementById("result").innerText = "";
  }

  window.save = async function() {
    const juz = document.getElementById("juz").value;
    const surah = document.getElementById("surah").value;
    const progress = document.getElementById("progress").value;

    await setDoc(doc(db, "progress", currentUser), {
      juz, surah, progress
    });

    loadData();
  }

  async function loadData() {
    const snap = await getDoc(doc(db, "progress", currentUser));
    if (snap.exists()) {
      const data = snap.data();
      document.getElementById("result").innerText =
        "Juz: " + data.juz +
        " | Surah: " + data.surah +
        " | Progress: " + ["1/4","1/2","3/4","Full"][data.progress-1];
    } else {
      document.getElementById("result").innerText = "No progress saved yet.";
    }
  }

</script>

</body>
</html>
