<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dual Quran Progress Tracker</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: white;
  text-align: center;
  padding: 40px;
}

.container {
  max-width: 800px;
  margin: auto;
  background: rgba(255,255,255,0.1);
  padding: 30px;
  border-radius: 15px;
  backdrop-filter: blur(10px);
}

.select-group {
  margin-bottom: 25px;
}

select {
  padding: 8px;
  margin: 5px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
}

.progress-container {
  display: flex;
  justify-content: space-around;
  margin-top: 30px;
}

.progress-wrapper {
  position: relative;
  width: 200px;
  height: 200px;
}

svg {
  transform: rotate(-90deg);
}

circle {
  fill: none;
  stroke-width: 12;
}

.bg {
  stroke: rgba(255,255,255,0.2);
}

.progress1 {
  stroke: #00ffae;
  stroke-linecap: round;
  transition: stroke-dashoffset 1s ease;
}

.progress2 {
  stroke: #ff7b00;
  stroke-linecap: round;
  transition: stroke-dashoffset 1s ease;
}

.progress-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 18px;
  font-weight: bold;
}

.highlight {
  margin-top: 30px;
  font-size: 22px;
  font-weight: bold;
  color: #00ffae;
}
</style>
</head>
<body>

<div class="container">
  <h2>Dual Quran Juz Progress</h2>

  <!-- USER 1 -->
  <div class="select-group">
    <h3>User 1</h3>
    <select id="surah1" onchange="updateUser(1)"></select>
    <select id="juz1" onchange="updateUser(1)"></select>
  </div>

  <!-- USER 2 -->
  <div class="select-group">
    <h3>User 2</h3>
    <select id="surah2" onchange="updateUser(2)"></select>
    <select id="juz2" onchange="updateUser(2)"></select>
  </div>

  <!-- PROGRESS CIRCLES -->
  <div class="progress-container">

    <div class="progress-wrapper">
      <svg width="200" height="200">
        <circle class="bg" cx="100" cy="100" r="85"></circle>
        <circle class="progress1" cx="100" cy="100" r="85"
          stroke-dasharray="534"
          stroke-dashoffset="534"></circle>
      </svg>
      <div class="progress-text" id="text1">0%</div>
    </div>

    <div class="progress-wrapper">
      <svg width="200" height="200">
        <circle class="bg" cx="100" cy="100" r="85"></circle>
        <circle class="progress2" cx="100" cy="100" r="85"
          stroke-dasharray="534"
          stroke-dashoffset="534"></circle>
      </svg>
      <div class="progress-text" id="text2">0%</div>
    </div>

  </div>

  <!-- SAME JUZ HIGHLIGHT -->
  <div id="sameJuzMessage"></div>

</div>

 <script type="module">

// üî• 1Ô∏è‚É£ Import Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

// üî• 2Ô∏è‚É£ Your Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDabMS-wVS_ktdqnJbnElZLaTD5Ftty7cM",
  authDomain: "quran-tracker-37a62.firebaseapp.com",
  projectId: "quran-tracker-37a62",
  storageBucket: "quran-tracker-37a62.firebasestorage.app",
  messagingSenderId: "553291625814",
  appId: "1:553291625814:web:9e5fc7b2fc05233d1c12f7",
  measurementId: "G-26BG9CESGP"
};

// üî• 3Ô∏è‚É£ Initialize Firebase
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

// ======================
// SURAH LIST
// ======================

const surahs = [
"Al-Fatiha","Al-Baqarah","Aal-E-Imran","An-Nisa","Al-Ma'idah",
"Al-An'am","Al-A'raf","Al-Anfal","At-Tawbah","Yunus",
"Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr",
"An-Nahl","Al-Isra","Al-Kahf","Maryam","Ta-Ha",
"Al-Anbiya","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan",
"Ash-Shu'ara","An-Naml","Al-Qasas","Al-Ankabut","Ar-Rum",
"Luqman","As-Sajdah","Al-Ahzab","Saba","Fatir",
"Ya-Sin","As-Saffat","Sad","Az-Zumar","Ghafir",
"Fussilat","Ash-Shura","Az-Zukhruf","Ad-Dukhan","Al-Jathiyah",
"Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf",
"Adh-Dhariyat","At-Tur","An-Najm","Al-Qamar","Ar-Rahman",
"Al-Waqi'ah","Al-Hadid","Al-Mujadila","Al-Hashr","Al-Mumtahanah",
"As-Saff","Al-Jumu'ah","Al-Munafiqun","At-Taghabun","At-Talaq",
"At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqah","Al-Ma'arij",
"Nuh","Al-Jinn","Al-Muzzammil","Al-Muddathir","Al-Qiyamah",
"Al-Insan","Al-Mursalat","An-Naba","An-Nazi'at","Abasa",
"At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Inshiqaq","Al-Buruj",
"At-Tariq","Al-A'la","Al-Ghashiyah","Al-Fajr","Al-Balad",
"Ash-Shams","Al-Layl","Ad-Duha","Ash-Sharh","At-Tin",
"Al-Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-Adiyat",
"Al-Qari'ah","At-Takathur","Al-Asr","Al-Humazah","Al-Fil",
"Quraysh","Al-Ma'un","Al-Kawthar","Al-Kafirun","An-Nasr",
"Al-Masad","Al-Ikhlas","Al-Falaq","An-Nas"
];

// ======================
// JUZ START SURAH
// ======================

const juzStart = {
1:1,2:2,3:2,4:3,5:4,6:4,7:5,8:6,9:7,10:8,
11:9,12:11,13:12,14:15,15:17,16:18,17:21,18:23,19:25,20:27,
21:29,22:33,23:36,24:39,25:41,26:46,27:51,28:58,29:67,30:78
};

// ======================
// INIT
// ======================

function populateDropdowns() {
  for (let i = 0; i < surahs.length; i++) {
    let option1 = new Option((i+1)+". "+surahs[i], i+1);
    let option2 = new Option((i+1)+". "+surahs[i], i+1);
    surah1.add(option1);
    surah2.add(option2);
  }

  for (let i = 1; i <= 30; i++) {
    juz1.add(new Option("Juz "+i, i));
    juz2.add(new Option("Juz "+i, i));
  }
}

function getJuz(surahNumber){
  let current = 1;
  for(let i=1;i<=30;i++){
    if(surahNumber >= juzStart[i]) current = i;
  }
  return current;
}

function updateUser(user){
  let surah = parseInt(document.getElementById("surah"+user).value);
  let juz = getJuz(surah);

  document.getElementById("juz"+user).value = juz;
  animateProgress(user, juz);
  checkSameJuz();
}

function animateProgress(user, juz){
  const circle = document.querySelector(".progress"+user);
  const text = document.getElementById("text"+user);

  const percent = Math.round((juz / 30) * 100);
  const circumference = 2 * Math.PI * 85;
  const offset = circumference - (percent/100) * circumference;

  circle.style.strokeDasharray = circumference;
  circle.style.strokeDashoffset = offset;
  text.innerText = percent + "%";
}

function checkSameJuz(){
  let j1 = juz1.value;
  let j2 = juz2.value;
  let msg = document.getElementById("sameJuzMessage");

  if(j1 === j2){
    msg.innerHTML = "<div class='highlight'>‚ú® Both are in Juz "+j1+" ‚ú®</div>";
  } else {
    msg.innerHTML = "";
  }
}

populateDropdowns();
updateUser(1);
updateUser(2);

</script>

</body>
</html>
